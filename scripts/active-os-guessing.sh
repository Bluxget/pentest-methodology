#!/bin/bash

. scripts.config

{
	echo -e "[START] $(basename "$0"): $(date '+%Y-%m-%d %H:%M:%S')"
	echo -e '----------------------------------------------------------------------------------------------------\n'

	echo -e '-> xprobe2 Scan:\n'

	xprobe2 $TARGET_IP

	echo -e '\n__________________________________________________________________________________________\n'

	echo -e '-> Nmap Scan:\n'

	nmap -O $TARGET_IP

	cat $OUTPUT_LOCATION/$SCRIPT_NAME.txt | grep --binary-files=text 'Running\|OS' > $FILTERED_LOCATION/$SCRIPT_NAME.txt

	echo -e '\n----------------------------------------------------------------------------------------------------'
	echo -e "[END] $(basename "$0"): $(date '+%Y-%m-%d %H:%M:%S')"

} > $OUTPUT_LOCATION/$SCRIPT_NAME.txt
