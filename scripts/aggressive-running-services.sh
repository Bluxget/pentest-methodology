#!/bin/bash

. scripts.config

{
	echo -e "[START] $(basename "$0"): $(date '+%Y-%m-%d %H:%M:%S')"
	echo -e '----------------------------------------------------------------------------------------------------\n'

	echo -e '-> Without Ping scan, no dns resolution, show only open ports all and test All TCP Ports:\n'

	nmap $TARGET_IP -n -Pn -sS -A --open -p-

	echo -e '\n__________________________________________________________________________________________\n'

	echo -e '-> Nmap verbose scan, runs syn stealth, T4 timing, OS and service version info, traceroute and scripts against services:\n'

	nmap $TARGET_IP -v -sS -A -T4

	cat $OUTPUTS_LOCATION/$SCRIPT_NAME.txt | grep open | sort > $FILTER_LOCATION/$SCRIPT_NAME.txt

	echo -e '\n----------------------------------------------------------------------------------------------------'
	echo -e "[END] $(basename "$0"): $(date '+%Y-%m-%d %H:%M:%S')"

} > $OUTPUTS_LOCATION/$SCRIPT_NAME.txt
